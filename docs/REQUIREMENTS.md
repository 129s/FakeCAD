# FakeCAD 软件需求说明（SRS）

## 1. 项目概述
- 名称：FakeCAD（简易二维 CAD 教学/演示项目）
- 技术栈：C++17、CMake、Qt6（Widgets + QGraphicsView）
- 目标：提供可交互的 2D 图形绘制、编辑与度量功能，结构清晰，便于课程演示与扩展。

## 2. 范围与用户
- 目标用户：课程作业/教学演示的学生与教师；对 2D CAD 基础感兴趣的开发者。
- 使用场景：在桌面端创建与编辑基础几何图形，查看长度/周长/面积等属性，并进行保存/加载。

## 3. 功能性需求
1) 交互界面
   - 通过菜单、工具栏、对话框、鼠标操作完成图形绘制与编辑。
   - 选择、拖拽移动、旋转、修改颜色与线型、删除等常见操作。
   - 面板/属性框显示与编辑选中图形的属性（名称、颜色、线型、尺寸等）。

2) 度量显示
   - 线型图形：计算并显示长度（Length）。
   - 区域图形：计算并显示周长（Perimeter）与面积（Area）。
   - 显示方式：可通过属性面板、气泡框、或直接在画布邻近位置以文本标注。

3) 图形类型
   - 线段（LineSegment）、多段折线（Polyline）。
   - 三角形（Triangle）、矩形（Rectangle）、普通 N 边形（Polygon）。
   - 圆（Circle）、椭圆（Ellipse）。

4) 面向对象设计
   - 共同抽象基类：`Shape`。
   - 线型抽象子类：`LineShape`。
   - 区域抽象子类：`AreaShape`。
   - 所有具体图形均继承自上述抽象类之一。

5) 统计信息
   - 每种具体图形类具备静态计数变量，统计该类实例在系统中的总数。
   - UI 显示总数统计汇总（可在状态栏或面板）。

6) 通用属性与方法
   - 通用数据：名字、颜色、线型（笔宽/线型等）。
   - 通用操作：`Move(dx, dy)`、`MoveTo(x, y)`、`Rotate(angle[, cx, cy])`。
   - 线型：计算顶点（例如用于多段线采样/分段）、计算顶点数。
   - 度量：`Length()`（线型），`Perimeter()` 与 `Area()`（区域）。

7) 额外功能
   - 修改线型、颜色等外观属性。
   - 鼠标拖拽移动、节点/控制点编辑、旋转。
   - 保存/加载：基于 JSON 文件格式（含图形类型、几何参数、样式与变换信息）。

## 4. 非功能性需求
- 跨平台：Windows（优先）、Linux、macOS（Qt6 支持范围内）。
- 性能：常见规模（数百对象）下交互顺畅；渲染与选取延迟可感知但不至卡顿。
- 可维护性：核心几何与 UI 解耦，形状模型与视图适配器分离，便于测试与扩展。
- 依赖：仅 Qt6（使用 Qt JSON/QColor/QPen 等），避免额外第三方库。

## 5. 约束与假设
- 坐标系：以画布像素为基础（设备无关像素）；支持缩放和平移视图。
- 旋转：默认绕图形中心旋转，支持自定义旋转中心（可选）。
- 持久化：使用 UTF-8 编码的 `.json` 文档；版本字段便于向后兼容。

## 6. 验收标准（抽样）
- 能创建与编辑列出的 7 类图形，属性可视化可用。
- 线型/区域的长度/周长/面积计算正确，边界值（退化、极小/极大尺寸）可处理。
- 支持保存与加载，兼容不同图形组合；加载后图形属性保持一致。
- 程序稳定运行，核心操作（绘制/选择/移动/旋转/保存加载）无崩溃。

## 7. 原始需求（附录，保留原文）

软件开发要求：

（1）设计一个易于理解的界面，可以通过鼠标、菜单、对话框等方式输入需要绘制的图形信息。

（2）可以计算图形的长度、面积、周长等属性，并已对话框、面板或直接通过文本显示在图形内部或旁边。

（3）能够处理线段、多段折线段、三角形、矩形、普通N边形、圆形、椭圆形等二维图形。

（4）设计所有图形共同的抽象基类Shape，其他所有图形类继承自该抽象基类或其线性抽象子类LineShape或区域图形抽象子类AreaShape。

（5）每种具体的图形（线段、三角形等）具有静态变量，以统计该图形在系统中的总数目。

（6）每种图形都有名字、颜色、线型数据成员；并且都有移动函数Move/MoveTo、计算长度Length等函数，其中区域型图形的计算长度为计算周长；线型图形具有计算顶点数据成员，计算顶点个数的成员函数，区域型图形具有计算面积的成员函数。

（7）其他额外功能：a)修改线型、颜色等。b)鼠标拖拽移动、修改图形。c)保存图形到文件，加载图形。d)图形的旋转。

